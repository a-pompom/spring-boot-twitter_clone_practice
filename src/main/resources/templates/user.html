<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">
	<header th:replace="layout :: base_head('ユーザ')"></header>
	<body>
		<form name="user-form" th:action="@{/user/search}" th:object="${userForm}" method="post">
			
			<header th:include="layout :: header(controller='user')" class="header"></header>
	
			<div class="user">
	 
				<ul class="user__headline">
					<li class="user-icon">
						<a href="user.html"><i class="fas fa-smile"></i></a>
					</li>
	
					<!--/* ユーザ情報 */-->
					<li class="user-info">
						<ul class="user-info__content">
							<li class="user-info__content__sub"><a th:href="@{/__${referUser.userName}__}">投稿</a></li>
							<li class="user-info__content__main"><a th:href="@{/__${referUser.userName}__}"
								th:text="*{dto.postCount}">99</a></li>
						</ul>
						<ul class="user-info__content">
							<li class="user-info__content__sub"><a th:href="@{/__${referUser.userName}__/following}">フォロー</a></li>
							<li class="user-info__content__main"><a th:href="@{/__${referUser.userName}__/following}"
								th:text="*{dto.followCount}">99</a></li>
						</ul>
						<ul class="user-info__content">
							<li class="user-info__content__sub"><a th:href="@{/__${referUser.userName}__/follower}">フォロワー</a></li>
							<li class="user-info__content__main"><a th:href="@{/__${referUser.userName}__/follower}"
								th:text="*{dto.followerCount}">99</a></li>
						</ul>
						<ul class="user-info__content">
							<li class="user-info__content__sub"><a th:href="@{/__${referUser.userName}__/favorite}">お気に入り</a></li>
							<li class="user-info__content__main"><a th:href="@{/__${referUser.userName}__/favorite}"
								th:text="*{dto.favoriteCount}">99</a></li>
						</ul>
					</li>
					
					<li class="user-button">
					<th:block th:if="*{loggedInUser}">
						<button type="submit" th:formaction="@{/user/editUser/__*{method}__}" class="button--edit">プロフィールを編集</button>
					</th:block>
					<th:block th:unless="*{loggedInUser}">
						<a th:href="@{/user/__${referUser.userId}__/do_follow/__*{method}__}" class="button--follow">フォロー</a>
					</th:block>
					
					</li>
	
				</ul>
	 
				<!--/* ユーザ基本情報 */-->
				<div class="user__about">
					<ul class="user__about__text">
						<li><input type="text" th:field="*{dto.user.userNickname}" placeholder="ユーザ名"></li>
						<li><input type="text" th:field="*{dto.user.userName}" placeholder="ユーザID"></li>
						<li><textarea th:field="*{dto.user.bio}" placeholder="自己紹介" cols="30" rows="10"></textarea></li>
						<li th:text="*{dto.user.createTs}">登録日: 2019年1月</li>
						<li th:text="*{dto.user.birthDate}">誕生日: 2000年1月1日</li>
					</ul> 
				</div>
				
				<!--/* URIの値に応じて表示項目を分岐 */-->
				<!--/* 投稿 */-->
				<th:block th:if="*{method} == 'post'">
					<div th:replace="post_fragment :: post(controller='user')"></div>
				</th:block>
				<!--/* フォロー */-->
				<th:block th:if="*{method} == 'following' or *{method} == 'follower'">
					<div th:replace="user_fragment :: follow"></div>
				</th:block>
				<!--/* お気に入り */-->
				<th:block th:if="*{method} == 'favorite'">
					<div th:replace="post_fragment :: post(controller='user')"></div>
				</th:block>
				
		</div>
	
	</form>

</body>
</html>